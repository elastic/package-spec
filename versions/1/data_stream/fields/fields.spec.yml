##
## Describes the specification for a data stream's various field definition files
##
spec:
  # Everything under here follows JSON schema (https://json-schema.org/), written as YAML for readability
  type: array
  items:
    type: object
    additionalProperties: false
    properties:
      name:
        description: Name of field
        type: string
      title:
        description: Title of field
        type: string
      type:
        description: Datatype of field
        type: string
        enum:
        - alias
        - histogram
        - constant_keyword
        - text
        - keyword
        - long
        - integer
        - short
        - byte
        - double
        - float
        - half_float
        - scaled_float
        - date
        - date_nanos
        - boolean
        - binary
        - integer_range
        - float_range
        - long_range
        - double_range
        - date_range
        - ip_range
        - group
        - geo_point
        - object
        - ip
        - nested
        - array
        - flattened
        - wildcard
        - version
        - unsigned_long
      object_type:
        description: Datatype of elements in object field
        type: string
        enum:
        - histogram
        - text
        - keyword
        - long
        - integer
        - short
        - byte
        - double
        - float
        - half_float
        - scaled_float
        - date
        - date_nanos
        - boolean
        - binary
        - integer_range
        - float_range
        - long_range
        - double_range
        - date_range
        - ip_range
        - geo_point
        - ip
        - array
        - flattened
        - wildcard
        - version
        - unsigned_long
      object_type_mapping_type:
        description: Types in the source document that should be mapped to the type defined in object_type, it can be "*" to indicate all types.
        type: string
        examples:
          - "double"
          - "*"
      group:
        description: Group the field belongs to.
        type: integer
      level:
        description: ECS level the field belongs to.
        type: string
        examples:
          - core
      description:
        description: Short description of field.
        type: string
      footnote:
        description: Additional detains on the field.
        type: string
      value:
        description: The value to associate with a constant_keyword field.
        type: string
      default_field:
        description: Set to false if the field should not be installed as a default field in Kibana index patterns.
        type: boolean
        default: true
      metric_type:
        description: Metric type
        type: string
        enum:
        - counter
        - gauge
      unit:
        description: Unit
        type: string
        enum:
        - byte
        - percent
        - d
        - h
        - m
        - s
        - ms
        - micros
        - nanos
      format:
        description: Formatting used by Kibana to display this field
        type: string
        enum:
          - percent
          - bytes
          - duration
      path:
        description: Target of alias field.
        type: string # TODO: Add sematic validation to check that the referenced field exists.
      dimension:
        description: Declare a field as dimension of time series
        type: boolean
        default: false
      example:
        description: Examples for this field.
        type: string
      pattern:
        description: Regular expression pattern of the field value
        type: string
        examples:
          - '^[a-zA-Z]$'
      ignore_above:
        description: Index only the first number of characters indicated by this option.
        type: integer
      external:
        description: External source reference
        type: string
        enum:
          - ecs
      norms:
        description: Set to false to disable normalization factors used for scoring calculation.
        type: boolean
        default: true
      multi_fields:
        description: Additional mappings for this field.
        $ref: "#"
      fields:
        description: Sub-fields, when type is group
        $ref: "#"     # JSON-schema syntax for pointing to the root of the schema
    required:
    - name
